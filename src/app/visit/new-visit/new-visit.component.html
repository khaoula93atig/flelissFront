<form novalidate name="myForm" #myForm='ngForm'>
    <clr-modal [(clrModalOpen)]="show">

        <h3 class="modal-title" style="color: #02675c;">
            <clr-icon shape="checkbox-list" style="width: 25px; height: 25px;"></clr-icon>
            Check your flocks every day in 12 points
        </h3>


        <div class="modal-body">
            <!-- /Spinner-->
            <div class="form ">
                <div class="form-visit">
                    <!-- form-visit date -->
                    <div class="formVdate form-visit0 clr-row">


                        <clr-input-container class="formDate clr-col-lg-12 clr-col-md-12 clr-col-sm-12" style="padding-left:12px">
                            <label class="clr-control-label clr-col-4"> Visit date :</label>
                            <input clrInput type="date" size="12" (change)="calculAge()" [(ngModel)]="visitDate" name="visitDate">
                        </clr-input-container>
                    </div>
                    <!-- form-visit part 1 -->
                    <div class="formV form-visit1 clr-row">
                        <clr-select-container class="clr-col-md-6 clr-col-sm-12" style="display: -webkit-inline-box;">
                            <label for="farm" class="clr-control-label clr-col-4 ">Center *</label>
                            <select clrSelect class="clr-col-sm-12" name="farm" [(ngModel)]="centerId" name="farmID"
                                (change)="getCenterId($event.target.value)" style="width: 105px;" clrPlaceholder="Select an option" >
                                <option value="" disabled selected>Select center</option>
                                <option *ngFor="let center of centers " [value]='center.centerId'>
                                    {{center.centerName}}
                                </option>
                            </select>
                        </clr-select-container>
                        <clr-select-container class="clr-col-md-6 clr-col-sm-12">
                            <label for="house" class="clr-control-label clr-col-4">House *</label>
                            <select clrSelect class="clr-col-sm-12" name="houseId" [(ngModel)]="houseId" style="width: 105px;"
                                (change)="getHouseId($event.target.value)">
                                <option value="" disabled selected>Select house</option>
                                <option *ngFor="let house of houses" [value]='house.houseId'>
                                    {{house.houseName}}
                                </option>
                            </select>
                        </clr-select-container>
                    </div>
                    <!-- form-visit part 2 -->
                    <div class="formV form-visit2 clr-row">
                      <clr-input-container class="clr-col-md-6 clr-col-sm-12">
                        <label for="flock" class="clr-control-label clr-col-4">
                          Flock * </label>
                        <input type="text" class="clr-col-sm-12" clrInput name="flockName" [(ngModel)]="flockName"
                               readonly />
                      </clr-input-container>
                        <clr-input-container class="clr-col-md-6 clr-col-sm-12">
                            <label for="breeddescription" class="clr-control-label clr-col-4">
                                Breed * </label>
                            <input type="text" class="clr-col-sm-12" clrInput name="breeddescription" [(ngModel)]="breeddescription"
         readonly />
                        </clr-input-container>
                    </div>
                    <!-- form-visit part 3 -->
                    <div class="formVdate form-visit3 clr-row">
                        <clr-input-container class="clr-col-md-6 clr-col-sm-12">
                            <label for="hatchDate" class="clr-control-label clr-col-5">
                                Hatch date * </label>
                            <input type="text" class="clr-col-sm-12" clrInput name="hatchDate" [(ngModel)]="hatchDate" style="width: 105px;"
                                 readonly />
                        </clr-input-container>

                        <clr-input-container class="clr-col-md-6 clr-col-sm-12">
                            <label for="ageFlock" class="clr-control-label clr-col-7">
                                Age of flock * </label>
                            <input clrInput required size="12" type="text" [(ngModel)]="ageOfTheFlock" name="ageFlock"
                            class="clr-col-sm-12" readonly />
                            day
                        </clr-input-container>
                    </div>
                    <!-- form-visit part4 -->
                    <div class="formV form-visit4 clr-row">
                        <clr-input-container class="clr-col-md-6 clr-col-sm-12">
                            <label for="chickPlaced" class="clr-control-label clr-col-6">
                                Chick placed * </label>
                            <input clrInput class="clr-col-sm-12" required size="15" type="text" name="chikedPlaced" style="margin-left:7px"
                                [(ngModel)]="chikedPlaced" name="chickPlaced" readonly />
                        </clr-input-container>
                        <clr-input-container class="clr-col-md-6 clr-col-sm-12">
                            <label for="psOrigin" class="clr-control-label clr-col-6">
                                PS origin </label>
                            <input clrInput class="clr-col-sm-12" size="15" type="text" [(ngModel)]="psOrigin" name="psOrigin" readonly />
                        </clr-input-container>
                    </div>
                </div>
                <!-- end form-vist -->
                <div class="form-check">



                    <div class="form-visit1 clr-col-md-12 clr-row">
                        <div class="labelVisit clr-col-lg-6 clr-col-md-6 clr-col-8 clr-row" style="margin-top: 30px;">
                            <img src="../../../assets/Icones visit/thermometer.png" class="imgIcon" width="22"
                                height="20">
                            <label for="temperature" class="clr-control-label">
                                Temperature * </label>
                        </div>
                        <div class="clr-control-container clr-col-lg-6 clr-col-md-6 clr-col-4" style="display: flex;">
                            <div class="clr-input-wrapper">
                                <input clrInput required name="shortEnName" name="shortEnName" size="30" type="number"
                                    name="temperature" [(ngModel)]="measureTemp" />
                            </div>
                            <div class="Unite" style="margin-top: 24px;  margin-left: -50px;">
                                <span class="taskUnit"> Â°C </span>
                            </div>
                        </div>
                    </div>

                    <div class="form-visit2 clr-col-md-12 clr-row">
                        <div class="labelVisit clr-col-lg-6 clr-col-md-6 clr-col-8 clr-row" style="margin-top: 30px;">
                            <img src="../../../assets/Icones visit/humidity.png" class="imgIcon" width="21" height="21">
                            <label for="humidity" class="clr-control-label ">
                                Humidity * </label>
                        </div>
                        <div class="clr-control-container clr-col-lg-6 clr-col-md-6 clr-col-4 " style="display: flex;">
                            <div class="clr-input-wrapper">
                                <input clrInput required size="30" type="number" name="humidity"
                                    [(ngModel)]="measureHumidity" />
                            </div>
                            <div class="Unite" style="margin-top: 24px;  margin-left: -50px;">
                                <span class="taskUnit"> % </span>
                            </div>
                        </div>
                    </div>

                    <div class="form-visit3 clr-col-md-12 clr-row">
                        <div class="labelVisit clr-col-lg-6 clr-col-md-6 clr-col-8 clr-row" style="margin-top: 30px;">
                            <img src="../../../assets/Icones visit/windsock.png" width="22" height="22" class="imgIcon">
                            <label for="airSpeed" class="clr-control-label ">
                                Air speed *</label>
                        </div>
                        <div class="clr-control-container clr-col-lg-6 clr-col-md-6 clr-col-4" style="display: flex;">
                            <div class="clr-input-wrapper">
                                <input clrInput required size="30" type="number" name="airSpeed"
                                    [(ngModel)]="measureAirSpeed" />
                            </div>
                            <div class="Unite" style="margin-top: 24px;  margin-left: -50px;">
                                <span class="taskUnit"> m/s </span>
                            </div>
                        </div>
                    </div>

                    <div class="form-visit4 clr-col-md-12 clr-row">
                        <div class="labelVisit clr-col-lg-6 clr-col-md-6 clr-col-8 clr-row" style="margin-top: 30px;">
                            <img src="../../../assets/Icones visit/amoniac.png" width="21" height="21" class="imgIcon">
                            <label for="amoniac" class="clr-control-label">
                                Amoniac *</label>
                        </div>
                        <div class="clr-control-container clr-col-lg-6 clr-col-md-6 clr-col-4" style="display: flex;">
                            <div class="clr-input-wrapper">
                                <input clrInput required size="30" type="number" name="amoniac"
                                    [(ngModel)]="measureAmoniac" />
                            </div>
                            <div class="Unite" style="margin-top: 24px;  margin-left: -50px;">
                                <span class="taskUnit"> ppm </span>
                            </div>
                        </div>
                    </div>

                    <div class="form-visit5 clr-col-md-12 clr-row">
                        <div class="labelVisit clr-col-lg-6 clr-col-md-6 clr-col-8 clr-row" style="margin-top: 30px;">
                            <img src="../../../assets/Icones visit/lightIntensity.png" width="21" height="21"
                                class="imgIcon">
                            <label for="lightIntensity" class="clr-control-label">
                                Light intensity *</label>
                        </div>
                        <div class="clr-control-container clr-col-lg-6 clr-col-md-6 clr-col-4" style="display: flex;">
                            <div class="clr-input-wrapper">
                                <input clrInput required size="30" type="number" name="lightIntensity"
                                    [(ngModel)]="measurelightIntensity" />
                            </div>
                            <div class="Unite" style="margin-top: 24px;  margin-left: -50px;">
                                <span class="taskUnit"> Lux </span>
                            </div>
                        </div>
                    </div>


                    <div class="form-visit6 clr-col-md-12 clr-row">
                        <div class="labelVisit clr-col-lg-6 clr-col-md-6 clr-col-8 clr-row" style="margin-top: 30px;">
                            <img src="../../../assets/Icones visit/feedConsumption.png" width="24" height="24"
                                class="imgIcon test">
                            <label for="feedConsumption" class="clr-control-label">
                                Daily Feed consumption *</label>
                        </div>
                        <div class="clr-control-container clr-col-lg-6 clr-col-md-6 clr-col-4" style="display: flex;">
                            <div class="clr-input-wrapper">
                                <input clrInput (change)="calculTotalTemporary()" required size="30" type="number" name="feedConsumption"
                                    [(ngModel)]="measurefeedConsumption" />
                            </div>
                            <div class="Unite" style="margin-top: 24px;  margin-left: -50px;">
                                <span class="taskUnit"> Kg </span>
                            </div>
                        </div>
                    </div>
                  <div class="clr-row">
                    <span Style="font-weight: bold ; font-size: x-small ; margin-left: 54px ; color : black">
                      Total :    {{totalFeed}} Kg</span>
                  </div>

                    <div class="form-visit7 clr-col-md-12 clr-row">
                        <div class="labelVisit clr-col-lg-6 clr-col-md-6 clr-col-8 clr-row" style="margin-top: 30px;">
                            <img src="../../../assets/Icones visit/waterConsumption.png" width="22" height="20"
                                class="imgIcon">
                            <label for="waterConsumption" class="clr-control-label ">
                                Daily water consumption *</label>
                        </div>
                        <div class="clr-control-container clr-col-lg-6 clr-col-md-6 clr-col-4" style="display: flex;">
                            <div class="clr-input-wrapper">
                                <input clrInput (change)="calculTotalWaterTemporary()" required size="30" type="number" name="waterConsumption"
                                    [(ngModel)]="measureWaterConsumption" />
                            </div>
                            <div class="Unite" style="margin-top: 24px;  margin-left: -50px;">
                                <span class="taskUnit"> L </span>

                            </div>

                        </div>

                    </div>
                  <div class="clr-row">
                    <span Style="font-weight: bold ; font-size: x-small ; margin-left: 54px ; color : black"> Total :    {{totalWater}} L</span>
                  </div>

                    <div class="form-visit8 clr-col-md-12 clr-row">
                        <div class="labelVisit clr-col-lg-6 clr-col-md-6 clr-col-8 clr-row" style="margin-top: 30px;">
                            <img src="../../../assets/Icones visit/mortality.png" width="21" height="21"
                                class="imgIcon">
                            <label for="mortality" class="clr-control-label">
                                Mortality *</label>
                        </div>
                        <div class="clr-control-container clr-col-lg-6 clr-col-md-6 clr-col-4" style="display: flex;">
                            <div class="clr-input-wrapper">
                                <input clrInput required type="number" name="mortality"
                                [max]="max" onkeyup="if(value>max) value=0;"
                                    [(ngModel)]="measureMortality" />
                            </div>



                            <div class="Unite" style="margin-top: 24px;  margin-left: -50px;">
                                <span class="taskUnit"> birds </span>
                            </div>
                        </div>
                    </div>

                    <div class="clr-radio-container form-visit9 clr-col-md-12 clr-row" clrInline
                        style="display: -webkit-box; margin-top: 30px;">
                        <img src="../../../assets/Icones visit/litterCondition.png" class="imgIcon" width="22"
                            height="22" />
                        <label for="litterCondition" class="clr-control-label">
                            Litter condition *</label>
                        <div class="radip-wrapper radio" >
                            <clr-radio-wrapper style="margin-right: 10px;">
                                <input type="radio" clrRadio name="options" required [value]="0" [(ngModel)]="measureLitterCondition"/>
                                <label>aerate</label>
                            </clr-radio-wrapper>
                            <clr-radio-wrapper style="margin-right: 10px; ">
                                <input type="radio" clrRadio name="options" required [value]="1" [(ngModel)]="measureLitterCondition"/>
                                <label>not aerate</label>
                            </clr-radio-wrapper>
                            <clr-radio-wrapper style="margin-right: 10px;">
                                <input type="radio" clrRadio name="options" required [value]="2" [(ngModel)]="measureLitterCondition"/>
                                <label>humid</label>
                            </clr-radio-wrapper>
                        </div>
                    </div>

                    <div class="form-visit9 clr-col-md-12 clr-row">
                        <div class="labelVisit clr-col-lg-6 clr-col-md-6 clr-col-5 clr-row" style="margin-top: 30px;">
                            <img src="../../../assets/Icones visit/density.png" width="23" height="23" class="imgIcon">
                            <label for="density" class="clr-control-label ">
                                Density *</label>
                        </div>
                        <div class="clr-control-container clr-col-lg-6 clr-col-md-6 clr-col-7 " style="display: flex;">
                            <div class="clr-input-wrapper">
                                <input clrInput required size="30" type="number" name="density"
                                    [(ngModel)]="measureDensity" />
                            </div>
                            <div class="Unite" style="margin-top: 24px;  margin-left: -50px;">
                                <span class="taskUnit"> bird/ã¡ </span>
                            </div>
                        </div>
                    </div>

                    <div class="form-visit10 clr-col-md-12 clr-row">
                        <div class="labelVisit clr-col-lg-6 clr-col-md-6 clr-col-8 clr-row" style="margin-top: 30px;">
                            <img src="../../../assets/Icones visit/weight.png" width="22" height="22" class="imgIcon">
                            <label for="weight" class="clr-control-label">
                                Average body weight</label>
                        </div>
                        <div class="clr-control-container clr-col-lg-6 clr-col-md-6 clr-col-4" style="display: flex;">
                            <div class="clr-input-wrapper">
                                <input class=" weight" clrInput size="30" type="number" name="weight"
                                    [(ngModel)]="measureWeight" readonly />
                            </div>
                            <div class="Unite" style="margin-top: 24px;  margin-left: -50px;">
                                <span class="taskUnit"> g </span>
                            </div>
                            <button *ngIf="weightCalcul" class="btn btn-sm btn-link" (click)="showWeight()" style="margin-top: 24px;">
                                <img src="https://img.icons8.com/color/48/000000/edit.png" width="20" height="20" />
                            </button>
                        </div>
                    </div>

                    <div class="form-visit9 clr-col-md-12 clr-row">
                        <div class="labelVisit clr-col-lg-6 clr-col-md-6 clr-col-8 clr-row" style="margin-top: 30px;">
                            <img src="../../../assets/Icones visit/homogeneityFlock.png" width="22" height="22"
                                class="imgIcon">
                            <label for="homogeneityFlock" class="clr-control-label">
                                CV </label>
                        </div>
                        <div class="clr-control-container clr-col-lg-6 clr-col-md-6 clr-col-4" style="display: flex;">
                            <div class="clr-input-wrapper">
                                <input clrInput size="30" type="number" name="cv" [(ngModel)]="cv" readonly />
                            </div>
                            <div class="Unite" style="margin-top: 24px;  margin-left: -50px;">
                                <span class="taskUnit"> % </span>
                            </div>
                        </div>
                    </div>




                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" (click)="ngOnInit()">Cancel</button>
                    <button type="button" class="btn btn-primary" [disabled]="!myForm.valid" (click)='submitAll()'>save</button>

                </div>
            </div>
        </div>
    </clr-modal>
</form>

<!-- Dialog for weight management -->
<form clrForm class="clr-form clr-form-horizontal">
    <clr-modal title="Weight" [(clrModalOpen)]="WeightOpened" [clrModalStaticBackdrop]="true">

        <h3 class="modal-title" style="color: #02675c;"><img src="../../../assets/icons8-weight-96.png" width="22"
                height="22">
            Weight measurement
        </h3>

        <div class="modal-body test">
            <div class="container" style="margin-top: 5%">
                <!--<button class="btn btn-primary" (click)="addRow()"> + Add Row </button>-->
                <table class="table table-striped table-bordered test1" name="table">
                    <thead>
                        <tr>

                            <th>Number of lines </th>
                            <th>Weight (g)</th>
                            <th>Add</th>
                            <th>Delete</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let dynamic of dynamicArray; let i = index;">

                            <td>
                                <input [(ngModel)]="dynamicArray[i].nbr" class="form-control"
                                    style="  border: 0; background-color: #fafafa; padding: 6px;border-bottom: .5px solid #ececec;"
                                    [ngModelOptions]="{standalone: true}" type="number" readonly />
                            </td>

                            <td>
                                <input [(ngModel)]="dynamicArray[i].weight" class="form-control"
                                    style="  border: 0; background-color: #fafafa; padding: 6px;border-bottom: .5px solid #ececec;"
                                    [ngModelOptions]="{standalone: true}" type="number" />
                            </td>

                            <td (click)="addRow()">
                                <img src="https://img.icons8.com/color/48/000000/add.png" width="22" height="22" />
                            </td>
                            <td (click)="deleteRow(i)">

                                <img src="https://img.icons8.com/color/48/000000/delete-forever.png" width="22"
                                    height="22" />
                            </td>
                        </tr>
                        <tr>

                        </tr>
                    </tbody>
                </table>
        </div>

        </div>
        <div class="modal-footer">
            <div class="clr-row">
                <span class="alertspan" style="margin-left: 0px;
                margin-right: 170px;"><clr-icon class="alert-icon" shape="exclamation-circle" style="color:red"></clr-icon>Preferably weighs <span style="font-weight:bold ; color:red">50</span> birds or more. </span>
        </div>
        <div class="clr-row clr-col-xs-12-sm-12 buttonfooter">
            <button type="button" class="btn btn-outline" (click)="WeightOpened = false">Cancel</button>
            <button type="button" class="btn btn-primary" (click)='submitWeight();'>save</button>
        </div>
        </div>



    </clr-modal>
</form>
<!-- Dialog for result -->
<form clrForm class="clr-form clr-form-horizontal">
    <clr-modal title="Weight" [(clrModalOpen)]="resultOpened" [clrModalStaticBackdrop]="true">

        <h3 class="modal-title" style="color: #02675c;">
            <img src="../../../assets/resultCart.png" height="22" style="margin-bottom: 5px; margin-right: 10px;">
            RESULTS
        </h3>

        <div class="modal-body">
            <table class="table table-noborder">
                <thead>
                    <tr>
                        <th class="left"></th>
                        <th>Mesure</th>
                        <th>Standard</th>
                        <th class="left">Deviation</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let vtask of visittasks; even as isEven; odd as isOdd" [ngClass]="{'even-row': isEven, 'odd-row': isOdd}">
                        <td class="left">{{vtask.task.description}}</td>
                        <td>{{vtask.measure}}  {{vtask.task.measureUnit}}</td>
                        <td>{{vtask.standard}}</td>
                        <td class="left"
                        [ngClass]="{'alert-low': vtask.deviation=='Low' || vtask.deviation == 'Poor', 'alert-high':vtask.deviation=='High' ,'normal':vtask.deviation=='Normal'|| vtask.deviation=='Good' }">
                        {{vtask.deviation}}</td>
                    </tr>

                </tbody>
            </table>

        </div>

        <div class="modal-footer">

            <button type="button" class="btn btn-outline" (click)="ngOnInit()">Close</button>

        </div>



    </clr-modal>
</form>
